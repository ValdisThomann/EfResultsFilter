<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /readme.source.md
To change this file edit the source file and then run MarkdownSnippets.
-->

# <img src="/src/icon.png" height="40px"> EfFilter

Sometimes, in the context of constructing an EF query, it is not possible to know if any given item should be returned in the results. For example when performing authorization where the rules rules are pulled from a different system, and that information does not exist in the database.

This project allows a custom function to be executed after the EF query execution and determine if any given node should be included in the result.


## NuGet [![NuGet Status](http://img.shields.io/nuget/v/EfFilter.svg?longCache=true&style=flat)](https://www.nuget.org/packages/EfFilter/)

https://nuget.org/packages/EfFilter/


## Notes:

 * When evaluated on nodes of a collection, excluded nodes will be removed from collection.
 * When evaluated on a property node, the value will be replaced with null.
 * A [Type.IsAssignableFrom](https://docs.microsoft.com/en-us/dotnet/api/system.type.isassignablefrom) check will be performed to determine if an item instance should be filtered based on the `<TItem>`.
 * Filters are static and hence shared for the current [AppDomain](https://docs.microsoft.com/en-us/dotnet/api/system.appdomain).


### Signature:

<!-- snippet: GlobalFiltersSignature -->
<a id='snippet-globalfilterssignature'/></a>
```cs
public class Filters
{
    public delegate bool Filter<in T>(T input);

    public delegate Task<bool> AsyncFilter<in T>(T input);
```
<sup>[snippet source](/src/EfFilter/Filters.cs#L8-L16) / [anchor](#snippet-globalfilterssignature)</sup>
<!-- endsnippet -->


### Usage:

<!-- snippet: add-filter -->
<a id='snippet-add-filter'/></a>
```cs
public class MyEntity
{
    public string Property { get; set; }
}
```
<sup>[snippet source](/src/Tests/GlobalFilterSnippets.cs#L9-L16) / [anchor](#snippet-add-filter)</sup>
<a id='snippet-add-filter-1'/></a>
```cs
var filters = new Filters();
filters.Add<MyEntity>(item => item.Property != "Ignore");

var items = await myDbContext.MyEntities.ToListAsync();
```
<sup>[snippet source](/src/Tests/GlobalFilterSnippets.cs#L20-L27) / [anchor](#snippet-add-filter-1)</sup>
<!-- endsnippet -->


## Icon

[Memory](https://thenounproject.com/term/database/1631008/) designed by H Alberto Gongora from [The Noun Project](https://thenounproject.com)
